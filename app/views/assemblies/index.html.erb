<h1>Alle IO-Baugruppen</h1>
<br>
<a href="<%=new_assembly_path%>" class="btn btn-success">Neue IO-Baugruppe erstellen</a>
<br><br><br><br>
<div id="content" class="table-responsive">
  <% if Assembly.any? %>
    <table class="table table-striped table-bordered" cellspacing="0" width="100%">
      <thead>
        <tr>
          <th>Kennung</th>
          <th>Kanäle</th>
          <th>Bezeichnung</th>
          <th>Brutto [CHF]</th>
          <th>Rabatt</th>
          <th>Netto [CHF]</th>
          <th>Anzahl Baugruppen</th>
          <th>Reserve</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>DI</td>
          <td id="anzahlKanaeleDi">1</td>
          <td>Digitaler Eingang auf ET200SP</td>
          <td id="bruttoChfDi"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattDi" value="0.3">
            </div>
          </td>
          <td id="nettoChfDi"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="anzahlBaugruppenDi" value="8">
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveDi" value="0.2">
            </div>
          </td>
        </tr>
        <tr>
          <td>DO</td>
          <td id="anzahlKanaeleDo">1</td>
          <td>Digitaler Ausgang auf ET200SP</td>
          <td id="bruttoChfDo"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattDo" value="0.3">
            </div>
          </td>
          <td id="nettoChfDo"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="anzahlBaugruppenDo" value="8">
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveDo" value="0.2">
            </div>
          </td>
        </tr>
        <tr>
          <td>AI</td>
          <td id="anzahlKanaeleAi">1</td>
          <td>Analoger Eingang auf ET200SP</td>
          <td id="bruttoChfAi"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattAi" value="0.3">
            </div>
          </td>
          <td id="nettoChfAi"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="anzahlBaugruppenAi" value="8">
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveAi" value="0.2">
            </div>
          </td>
        </tr>
        <tr>
          <td>AO</td>
          <td id="anzahlKanaeleAo">1</td>
          <td>Analoger Ausgang auf ET200SP</td>
          <td id="bruttoChfAo"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattAo" value="0.3">
            </div>
          </td>
          <td id="nettoChfAo"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="anzahlBaugruppenAo" value="8">
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveAo" value="0">
            </div>
          </td>
        </tr>
        <tr>
          <td>Z</td>
          <td id="anzahlKanaeleZ">1</td>
          <td>Encoder Inkremental auf ET200SP</td>
          <td id="bruttoChfZ"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattZ" value="0.3">
            </div>
          </td>
          <td id="nettoChfZ"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="anzahlBaugruppenZ" value="8">
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveZ" value="0">
            </div>
          </td>
        </tr>
        <tr>
          <td>INKR</td>
          <td id="anzahlKanaeleInkr">1</td>
          <td>Encoder Inkremental auf ET200SP</td>
          <td id="bruttoChfInkr"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattInkr" value="0.3">
            </div>
          </td>
          <td id="nettoChfInkr"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="anzahlBaugruppenInkr" value="8">
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveInkr" value="0">
            </div>
          </td>
        </tr>
        <tr>
          <td>SSI</td>
          <td id="anzahlKanaeleSsi">1</td>
          <td>Encoder SSI auf ET200SP</td>
          <td id="bruttoChfSsi"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattSsi" value="0.3">
            </div>
          </td>
          <td id="nettoChfSsi"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="anzahlBaugruppenSsi" value="8">
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveSsi" value="0">
            </div>
          </td>
        </tr>
        <tr>
          <td>sDI</td>
          <td id="anzahlKanaeleSdi">1</td>
          <td>Digitaler Eingang auf PNOZmulti</td>
          <td id="bruttoChfSdi"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattSdi" value="0.05">
            </div>
          </td>
          <td id="nettoChfSdi"></td>
          <td></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveSdi" value="0.05">
            </div>
          </td>
        </tr>
        <tr>
          <td>sDO</td>
          <td id="anzahlKanaeleSdo">1</td>
          <td>Digitaler Ausgang auf PNOZmulti</td>
          <td id="bruttoChfSdo"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattSdo" value="0.05">
            </div>
          </td>
          <td id="nettoChfSdo"></td>
          <td></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveSdo" value="0.05">
            </div>
          </td>
        </tr>
        <tr>
          <td>sAI</td>
          <td id="anzahlKanaeleSai">1</td>
          <td>Analoger Eingang auf PNOZmulti</td>
          <td id="bruttoChfSai"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattSai" value="0.05">
            </div>
          </td>
          <td id="nettoChfSai"></td>
          <td></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveSai" value="0.0">
            </div>
          </td>
        </tr>
        <tr>
          <td>sAO</td>
          <td id="anzahlKanaeleSao">1</td>
          <td>Analoger Ausgang auf PNOZmulti</td>
          <td id="bruttoChfSao"></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="rabattSao" value="0.05">
            </div>
          </td>
          <td id="nettoChfSao"></td>
          <td></td>
          <td>
            <div class="form-group">
              <input type="text" class="form-control" id="reserveSao" value="0.0">
            </div>
          </td>
        </tr>
      <tbody>
    </table>
    <button id="updatePrices" class="btn btn-success">Preise aktualisieren</button>
    <br><br><br><br><br>


    <table id="assembly_table" class="table table-striped table-bordered data_table" cellspacing="0" width="100%">
      <thead>
      <tr>
        <th>ID</th>
        <th>Kennung</th>
        <th>Kanäle</th>
        <th>Artikel-Nr.</th>
        <th>Bezeichnung</th>
        <th>Brutto [EUR]</th>
        <th>Brutto [CHF]</th>
        <th>Rabatt</th>
        <th>Netto [EUR]</th>
        <th>Aktionen</th>
      </tr>
      </thead>
      <tbody>
        <% @assemblies.each do |assembly| %>
          <tr>
            <td><%= assembly.id %></td>
            <td><%= assembly.kennung %></td>
            <td><%= assembly.kanaele %></td>
            <td><%= assembly.artikelnr %></td>
            <td><%= truncate(assembly.bezeichnung, :length => 50) %></td>
            <td id="brutto_eur"><%=
              if assembly.brutto_eur.nil?
                if assembly.brutto_chf.nil?
                  ''
                else
                  assembly.brutto_chf / 1.15
                end
              else
                assembly.brutto_eur
              end
            %></td>
            <td id="bruttoChf<%= assembly.id %>"><%=
              if assembly.brutto_chf.nil?
                if assembly.brutto_eur.nil?
                  ''
                else
                  assembly.brutto_eur * 1.15
                end
              else
                assembly.brutto_chf
              end
            %></td>
            <td id="rabatt<%= assembly.id %>"><%= assembly.rabatt %></td>
            <td id="nettoChf<%= assembly.id %>"></td>
            <td>
              <a href="<%= assembly_path(assembly.id) %>" class="btn btn-xs btn-default btn-index">Info</a>
              <a href="<%= edit_assembly_path(assembly.id) %>" class="btn btn-xs btn-info btn-index">Bearbeiten</a>
              <button type="button" class="btn btn-xs btn-danger btn-index"
                      data-toggle="modal" data-target="#popup_sure_delete"
                      data-itemid="<%= assembly.id %>"
                      data-model="assemblies">
                Baugruppe löschen
              </button>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    Keine IO-Baugruppen vorhanden
  <% end %>
</div>

<%= render 'layouts/loading', :message => "Lade IO-Baugruppen..." %>
<%= render 'layouts/popups' %>

<script>
  $(document).ready(function() {
      updatePrices();

      <% @assemblies.each do |assembly| %>
        $("#nettoChf<%= assembly.id %>").html($("#bruttoChf<%= assembly.id %>").val() -
            $("#rabatt<%= assembly.id %>").val() * $("#bruttoChf<%= assembly.id %>").val());
      <% end %>
  });
    $("#updatePrices").click(function() {
        updatePrices();
    });

    var eurokurs = 1.15;
    <%= eurokurs = 1.15 %>

    <% if Assembly.where(["kennung = ?", "PB-Stecker"]).any? && Assembly.where(["kennung = ?", "ET200SP PB"]).any? &&
     Assembly.where(["kennung = ?", "ET200SP Base"]).any? && Assembly.where(["kennung = ?", "ET200SP Base mit U-Vers"]).any? &&
     Assembly.where(["kennung = ?", "ET200SP 08DI"]).any? && Assembly.where(["kennung = ?", "ET200SP 08DO"]).any? &&
     Assembly.where(["kennung = ?", "ET200SP 02AI"]).any? && Assembly.where(["kennung = ?", "ET200SP 02AO"]).any? &&
     Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).any? && Assembly.where(["kennung = ?", "ET200SP Enc SSI"]).any? &&
     Assembly.where(["kennung = ?", "PNOZmulti"]).any? && Assembly.where(["kennung = ?", "PNOZmulti 08DI"]).any? &&
     Assembly.where(["kennung = ?", "PNOZmulti Chipcard"]).any? && Assembly.where(["kennung = ?", "PNOZmulti Klemm"]).any? &&
     Assembly.where(["kennung = ?", "PNOZmulti SL"]).any? && Assembly.where(["kennung = ?", "PNOZmulti SL Klemm"]).any? &&
     Assembly.where(["kennung = ?", "PNOZmulti PB"]).any? && Assembly.where(["kennung = ?", "PNOZmulti 04DO"]).any? &&
     Assembly.where(["kennung = ?", "PNOZmulti 01AI"]).any? && Assembly.where(["kennung = ?", "PNOZmulti 01AO"]).any?
     %>

      function updatePrices() {
        var preisPbStecker = <%= Assembly.where(["kennung = ?", "PB-Stecker"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PB-Stecker"]).first.brutto_chf : Assembly.where(["kennung = ?", "PB-Stecker"]).first.brutto_eur * eurokurs %>;
        var preisPbBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP PB"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP PB"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP PB"]).first.brutto_eur * eurokurs %>;
        var preisBase = <%= Assembly.where(["kennung = ?", "ET200SP Base"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP Base"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP Base"]).first.brutto_eur * eurokurs %>;
        var preisBaseUvers = <%= Assembly.where(["kennung = ?", "ET200SP Base mit U-Vers"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP Base mit U-Vers"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP Base mit U-Vers"]).first.brutto_eur * eurokurs %>;
        var preisIoBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 08DI"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP 08DI"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP 08DI"]).first.brutto_eur * eurokurs %>;
        var anzahlKanaeleBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 08DI"]).first.kanaele %>;
        var anzahlBaugruppen = $("#anzahlBaugruppenDi").val();
        var reserve = $("#reserveDi").val();
        var bruttoChf = (preisPbStecker + preisPbBaugruppe)/
            anzahlBaugruppen+((preisIoBaugruppe+((preisBaseUvers+preisBase)/2))/
            (anzahlKanaeleBaugruppe-(reserve*anzahlKanaeleBaugruppe)));
        var nettoChf = bruttoChf- $("#rabattDi").val() * bruttoChf;
        $("#bruttoChfDi").html(bruttoChf);
        $("#nettoChfDi").html(nettoChf);

        preisIoBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 08DO"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP 08DO"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP 08DO"]).first.brutto_eur * eurokurs %>;
        anzahlKanaeleBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 08DO"]).first.kanaele %>;
        anzahlBaugruppen = $("#anzahlBaugruppenDo").val();
        reserve = $("#reserveDo").val();
        bruttoChf = (preisPbStecker + preisPbBaugruppe)/
            anzahlBaugruppen+((preisIoBaugruppe+((preisBaseUvers+preisBase)/2))/
            (anzahlKanaeleBaugruppe-(reserve*anzahlKanaeleBaugruppe)));
        nettoChf = bruttoChf- $("#rabattDo").val() * bruttoChf;
        $("#bruttoChfDo").html(bruttoChf);
        $("#nettoChfDo").html(nettoChf);

        preisIoBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 02AI"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP 02AI"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP 02AI"]).first.brutto_eur * eurokurs %>;
        anzahlKanaeleBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 02AI"]).first.kanaele %>;
        anzahlBaugruppen = $("#anzahlBaugruppenAi").val();
        reserve = $("#reserveAi").val();
        bruttoChf = (preisPbStecker + preisPbBaugruppe)/
            anzahlBaugruppen+((preisIoBaugruppe+((preisBaseUvers+preisBase)/2))/
            (anzahlKanaeleBaugruppe-(reserve*anzahlKanaeleBaugruppe)));
        nettoChf = bruttoChf- $("#rabattAi").val() * bruttoChf;
        $("#bruttoChfAi").html(bruttoChf);
        $("#nettoChfAi").html(nettoChf);

        preisIoBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 02AO"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP 02AO"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP 02AO"]).first.brutto_eur * eurokurs %>;
        anzahlKanaeleBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP 02AO"]).first.kanaele %>;
        anzahlBaugruppen = $("#anzahlBaugruppenAo").val();
        reserve = $("#reserveAo").val();
        bruttoChf = (preisPbStecker + preisPbBaugruppe)/
            anzahlBaugruppen+((preisIoBaugruppe+((preisBaseUvers+preisBase)/2))/
            (anzahlKanaeleBaugruppe-(reserve*anzahlKanaeleBaugruppe)));
        nettoChf = bruttoChf- $("#rabattAo").val() * bruttoChf;
        $("#bruttoChfAo").html(bruttoChf);
        $("#nettoChfAo").html(nettoChf);

        preisIoBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.brutto_eur * eurokurs %>;
        anzahlKanaeleBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.kanaele %>;
        anzahlBaugruppen = $("#anzahlBaugruppenZ").val();
        reserve = $("#reserveZ").val();
        bruttoChf = (preisPbStecker + preisPbBaugruppe)/
            anzahlBaugruppen+((preisIoBaugruppe+((preisBaseUvers+preisBase)/2))/
            (anzahlKanaeleBaugruppe-(reserve*anzahlKanaeleBaugruppe)));
        nettoChf = bruttoChf- $("#rabattZ").val() * bruttoChf;
        $("#bruttoChfZ").html(bruttoChf);
        $("#nettoChfZ").html(nettoChf);


        preisIoBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.brutto_eur * eurokurs %>;
        anzahlKanaeleBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP Enc INKR"]).first.kanaele %>;
        anzahlBaugruppen = $("#anzahlBaugruppenInkr").val();
        reserve = $("#reserveInkr").val();
        bruttoChf = (preisPbStecker + preisPbBaugruppe)/
            anzahlBaugruppen+((preisIoBaugruppe+((preisBaseUvers+preisBase)/2))/
            (anzahlKanaeleBaugruppe-(reserve*anzahlKanaeleBaugruppe)));
        nettoChf = bruttoChf- $("#rabattInkr").val() * bruttoChf;
        $("#bruttoChfInkr").html(bruttoChf);
        $("#nettoChfInkr").html(nettoChf);
        $("#bruttoChfZ").html(bruttoChf);
        $("#nettoChfZ").html(nettoChf);

        preisIoBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP Enc SSI"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "ET200SP Enc SSI"]).first.brutto_chf : Assembly.where(["kennung = ?", "ET200SP Enc SSI"]).first.brutto_eur * eurokurs %>;
        anzahlKanaeleBaugruppe = <%= Assembly.where(["kennung = ?", "ET200SP Enc SSI"]).first.kanaele %>;
        anzahlBaugruppen = $("#anzahlBaugruppenSsi").val();
        reserve = $("#reserveSsi").val();
        bruttoChf = (preisPbStecker + preisPbBaugruppe)/
            anzahlBaugruppen+((preisIoBaugruppe+((preisBaseUvers+preisBase)/2))/
            (anzahlKanaeleBaugruppe-(reserve*anzahlKanaeleBaugruppe)));
        nettoChf = bruttoChf- $("#rabattSsi").val() * bruttoChf;
        $("#bruttoChfSsi").html(bruttoChf);
        $("#nettoChfSsi").html(nettoChf);

        var anzahlKanaelePnozMulti = <%= Assembly.where(["kennung = ?", "PNOZmulti"]).first.kanaele %>;
        var preisPnozMulti = <%= Assembly.where(["kennung = ?", "PNOZmulti"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti"]).first.brutto_eur * eurokurs %>;
        var anzahlKanaelePnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 08DI"]).first.kanaele %>;
        var preisPnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 08DI"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti 08DI"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti 08DI"]).first.brutto_eur * eurokurs %>;
        var preisPnozMultiChipcard = <%= Assembly.where(["kennung = ?", "PNOZmulti Chipcard"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti Chipcard"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti Chipcard"]).first.brutto_eur * eurokurs %>;
        var preisPnozMultiKlemm = <%= Assembly.where(["kennung = ?", "PNOZmulti Klemm"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti Klemm"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti Klemm"]).first.brutto_eur * eurokurs %>;
        var preisPnozMultiSl = <%= Assembly.where(["kennung = ?", "PNOZmulti SL"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti SL"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti SL"]).first.brutto_eur * eurokurs %>;
        var preisPnozMultiSlKlemm = <%= Assembly.where(["kennung = ?", "PNOZmulti SL Klemm"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti SL Klemm"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti SL Klemm"]).first.brutto_eur * eurokurs %>;
        var preisPnozMultiPb = <%= Assembly.where(["kennung = ?", "PNOZmulti PB"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti PB"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti PB"]).first.brutto_eur * eurokurs %>;
        reserve = $("#reserveSdi").val();
        bruttoChf = ((preisPnozMulti + preisPnozMultiChipcard + preisPnozMultiKlemm + 2*preisPnozMultiSl + 2*preisPnozMultiSlKlemm + preisPnozMultiPb + preisPbStecker)/(anzahlKanaelePnozMulti-anzahlKanaelePnozMulti*reserve)) +
            (preisPnozMultiSlKlemm+preisPnozMultiBaugruppe)/(anzahlKanaelePnozMultiBaugruppe-anzahlKanaelePnozMultiBaugruppe*reserve);
        nettoChf = bruttoChf- $("#rabattSdi").val() * bruttoChf;
        $("#bruttoChfSdi").html(bruttoChf);
        $("#nettoChfSdi").html(nettoChf);

        anzahlKanaelePnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 04DO"]).first.kanaele %>;
        preisPnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 04DO"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti 04DO"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti 04DO"]).first.brutto_eur * eurokurs %>;
        reserve = $("#reserveSdo").val();
        bruttoChf = ((preisPnozMulti + preisPnozMultiChipcard + preisPnozMultiKlemm + 2*preisPnozMultiSl + 2*preisPnozMultiSlKlemm + preisPnozMultiPb + preisPbStecker)/(anzahlKanaelePnozMulti-anzahlKanaelePnozMulti*reserve)) +
            (preisPnozMultiSlKlemm+preisPnozMultiBaugruppe)/(anzahlKanaelePnozMultiBaugruppe-anzahlKanaelePnozMultiBaugruppe*reserve);
        nettoChf = bruttoChf- $("#rabattSdo").val() * bruttoChf;
        $("#bruttoChfSdo").html(bruttoChf);
        $("#nettoChfSdo").html(nettoChf);

        anzahlKanaelePnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 01AI"]).first.kanaele %>;
        preisPnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 01AI"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti 01AI"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti 01AI"]).first.brutto_eur * eurokurs %>;
        reserve = $("#reserveSai").val();
        bruttoChf = ((preisPnozMulti + preisPnozMultiChipcard + preisPnozMultiKlemm + 2*preisPnozMultiSl + 2*preisPnozMultiSlKlemm + preisPnozMultiPb + preisPbStecker)/(anzahlKanaelePnozMulti-anzahlKanaelePnozMulti*reserve)) +
            (preisPnozMultiSlKlemm+preisPnozMultiBaugruppe)/(anzahlKanaelePnozMultiBaugruppe-anzahlKanaelePnozMultiBaugruppe*reserve);
        nettoChf = bruttoChf- $("#rabattSai").val() * bruttoChf;
        $("#bruttoChfSai").html(bruttoChf);
        $("#nettoChfSai").html(nettoChf);

        anzahlKanaelePnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 01AO"]).first.kanaele %>;
        preisPnozMultiBaugruppe = <%= Assembly.where(["kennung = ?", "PNOZmulti 01AO"]).first.brutto_eur.nil? ? Assembly.where(["kennung = ?", "PNOZmulti 01AO"]).first.brutto_chf : Assembly.where(["kennung = ?", "PNOZmulti 01AO"]).first.brutto_eur * eurokurs %>;
        reserve = $("#reserveSao").val();
        bruttoChf = ((preisPnozMulti + preisPnozMultiChipcard + preisPnozMultiKlemm + 2*preisPnozMultiSl + 2*preisPnozMultiSlKlemm + preisPnozMultiPb + preisPbStecker)/(anzahlKanaelePnozMulti-anzahlKanaelePnozMulti*reserve)) +
            (preisPnozMultiSlKlemm+preisPnozMultiBaugruppe)/(anzahlKanaelePnozMultiBaugruppe-anzahlKanaelePnozMultiBaugruppe*reserve);
        nettoChf = bruttoChf- $("#rabattSao").val() * bruttoChf;
        $("#bruttoChfSao").html(bruttoChf);
        $("#nettoChfSao").html(nettoChf);

    }
    <% end %>
</script>